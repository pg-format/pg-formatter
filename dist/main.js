(()=>{"use strict";function t(r,e,n,o){var i=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(i,t.prototype),i.expected=e,i.found=n,i.location=o,i.name="SyntaxError",i}function r(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,t+(e+=e.repeat(r)).slice(0,r))}function e(r,e){var n,o={},i=(e=void 0!==e?e:{}).grammarSource,u={PG:ar},c=ar,a="#",s=":",f=",",l="-",h=".",p="'",d='"',A="\\",g="/",v="b",m="f",C="n",b="r",y="t",x="u",j="--",w="->",E="0",O="true",$="false",F=/^[0-9]/,S=/^[^\0-\b\v\f\x0E-\x1F"'\\]/,q=/^[^\r\n]/,N=/^[\n]/,R=/^[\r]/,k=/^[ \t]/,J=/^[0-9a-f]/i,P=/^[^\0- <>"{}|\^`\\]/,I=/^[:#,\-]/,U=/^[1-9]/,z=/^[eE]/,G=/^[+\-]/,M=rr("#",!1),T=rr(":",!1),B=rr(",",!1),D=rr("-",!1),H=rr(".",!1),Q=er([["0","9"]],!1,!1),_=rr("'",!1),K=rr('"',!1),L=er([["\0","\b"],"\v","\f",["",""],'"',"'","\\"],!0,!1),V=rr("\\",!1),W=rr("/",!1),X=rr("b",!1),Y=rr("f",!1),Z=rr("n",!1),tt=rr("r",!1),rt=rr("t",!1),et=rr("u",!1),nt=rr("--",!1),ot=rr("->",!1),it=er(["\r","\n"],!0,!1),ut=er(["\n"],!1,!1),ct=er(["\r"],!1,!1),at=er([" ","\t"],!1,!1),st=er([["0","9"],["a","f"]],!1,!0),ft=nr("UNQUOTED_CHAR"),lt=er([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),ht=er([":","#",",","-"],!1,!1),pt=nr("INTEGER"),dt=rr("0",!1),At=er([["1","9"]],!1,!1),gt=er(["e","E"],!1,!1),vt=er(["+","-"],!1,!1),mt=rr("true",!1),Ct=rr("false",!1),bt={type:"any"},yt=function(){return{lines:qr,comments:Nr}},xt=function(t,r,e){t.node?(t.node.labels=r,t.node.properties=e):t.edge&&(t.edge.labels=r,t.edge.properties=e),t.pos.end=tr().end.offset,qr.push(t)},jt=function(t){t&&(Nr[tr().start.offset]=Zt())},wt=function(t){return{node:{id:t},pos:{start:tr().start.offset}}},Et=function(t,e,n,o){t||e||function(t,e){throw e=void 0!==e?e:ir(Lt,Kt),cr([nr("identifier")],r.substring(Lt,Kt),e)}(),e||(t.literal&&(t.literal+=":"),e=t,t=null);const i={from:e,to:o,direction:n};return t&&(i.id=t),{edge:i,pos:{start:tr().start.offset}}},Ot=function(t){return t},$t=function(t,r){return{key:t,values:r}},Ft=function(t,r){return[t,...r]},St=function(){return{literal:Number(Zt())}},qt=function(){return{literal:Zt()}},Nt=function(){return{literal:Zt()}},Rt=function(){return{literal:Zt().slice(0,-1)}},kt=function(){return{literal:Zt().slice(0,-1)}},Jt=function(t){return{quote:"'",literal:Zt().slice(1,-1),value:t.join("")}},Pt=function(t){return{quote:'"',literal:Zt().slice(1,-1),value:t.join("")}},It=function(t){return{quote:"'",literal:Zt().slice(1,-1),value:t.join("")}},Ut=function(t){return{quote:'"',literal:Zt().slice(1,-1),value:t.join("")}},zt=function(){return"\b"},Gt=function(){return"\f"},Mt=function(){return"\n"},Tt=function(){return"\r"},Bt=function(){return"\t"},Dt=function(t){return String.fromCharCode(parseInt(t,16))},Ht=function(){Nr[tr().start.offset]=Zt()},Qt=function(){return{literal:!0}},_t=function(){return{literal:!1}},Kt=0,Lt=0,Vt=[{line:1,column:1}],Wt=0,Xt=[],Yt=0;if("startRule"in e){if(!(e.startRule in u))throw new Error("Can't start parsing from rule \""+e.startRule+'".');c=u[e.startRule]}function Zt(){return r.substring(Lt,Kt)}function tr(){return ir(Lt,Kt)}function rr(t,r){return{type:"literal",text:t,ignoreCase:r}}function er(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function nr(t){return{type:"other",description:t}}function or(t){var e,n=Vt[t];if(n)return n;for(e=t-1;!Vt[e];)e--;for(n={line:(n=Vt[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return Vt[t]=n,n}function ir(t,r,e){var n=or(t),o=or(r),u={source:i,start:{offset:t,line:n.line,column:n.column},end:{offset:r,line:o.line,column:o.column}};return e&&i&&"function"==typeof i.offset&&(u.start=i.offset(u.start),u.end=i.offset(u.end)),u}function ur(t){Kt<Wt||(Kt>Wt&&(Wt=Kt,Xt=[]),Xt.push(t))}function cr(r,e,n){return new t(t.buildMessage(r,e),r,e,n)}function ar(){var t,r,e,n,i;for(t=Kt,r=[],e=Kt,n=fr(),(i=wr())!==o?e=n=[n,i]:(Kt=e,e=o),e===o&&(e=Kt,(n=sr())!==o&&(i=Sr())!==o?e=n=[n,i]:(Kt=e,e=o));e!==o;)r.push(e),e=Kt,n=fr(),(i=wr())!==o?e=n=[n,i]:(Kt=e,e=o),e===o&&(e=Kt,(n=sr())!==o&&(i=Sr())!==o?e=n=[n,i]:(Kt=e,e=o));return e=fr(),Lt=t,yt()}function sr(){var t,e,n,i,u,c,s;if(t=Kt,e=function(){var t,e,n,i,u;return t=Kt,e=function(){var t,e,n,i;return t=Kt,(e=Ar())!==o&&(n=xr())!==o?t=e:(Kt=t,t=o),t===o&&(t=Kt,(e=gr())!==o?(n=Kt,Yt++,35===r.charCodeAt(Kt)?(i=a,Kt++):(i=o,0===Yt&&ur(M)),Yt--,i===o?n=void 0:(Kt=n,n=o),n!==o&&(i=xr())!==o?t=e:(Kt=t,t=o)):(Kt=t,t=o)),t}(),e===o&&(e=null),n=Kt,(i=dr())!==o&&xr()!==o?n=i:(Kt=n,n=o),n===o&&(n=null),i=function(){var t;return r.substr(Kt,2)===j?(t=j,Kt+=2):(t=o,0===Yt&&ur(nt)),t===o&&(r.substr(Kt,2)===w?(t=w,Kt+=2):(t=o,0===Yt&&ur(ot))),t}(),i!==o&&xr()!==o&&(u=dr())!==o?(Lt=t,t=Et(e,n,i,u)):(Kt=t,t=o),t}(),e===o&&(e=function(){var t,r;return t=Kt,(r=dr())!==o&&(Lt=t,r=wt(r)),t=r}()),e!==o){for(n=[],i=Kt,(u=xr())!==o&&(c=lr())!==o?i=c:(Kt=i,i=o);i!==o;)n.push(i),i=Kt,(u=xr())!==o&&(c=lr())!==o?i=c:(Kt=i,i=o);for(i=[],u=Kt,(c=xr())!==o&&(s=hr())!==o?u=s:(Kt=u,u=o);u!==o;)i.push(u),u=Kt,(c=xr())!==o&&(s=hr())!==o?u=s:(Kt=u,u=o);u=function(){var t;return t=Kt,Er()!==o&&jr()!==o?(Lt=t,t=Ht()):(Kt=t,t=o),t===o&&(t=Er()),t}(),u===o&&(u=null),Lt=t,t=xt(e,n,i)}else Kt=t,t=o;return t}function fr(){var t,r;return t=Kt,Er(),(r=jr())===o&&(r=null),Lt=t,jt(r)}function lr(){var t,e,n;return t=Kt,58===r.charCodeAt(Kt)?(e=s,Kt++):(e=o,0===Yt&&ur(T)),e!==o?(Er(),(n=dr())!==o?(Lt=t,t=Ot(n)):(Kt=t,t=o)):(Kt=t,t=o),t}function hr(){var t,e,n;return t=Kt,e=function(){var t,e,n,i,u,c;if((t=Ar())===o&&(t=Kt,(e=gr())!==o&&(n=xr())!==o?t=e:(Kt=t,t=o),t===o))if(t=Kt,(e=Fr())!==o){for(n=[],i=Kt,u=Kt,Yt++,58===r.charCodeAt(Kt)?(c=s,Kt++):(c=o,0===Yt&&ur(T)),Yt--,c===o?u=void 0:(Kt=u,u=o),u!==o&&(c=$r())!==o?i=u=[u,c]:(Kt=i,i=o);i!==o;)n.push(i),i=Kt,u=Kt,Yt++,58===r.charCodeAt(Kt)?(c=s,Kt++):(c=o,0===Yt&&ur(T)),Yt--,c===o?u=void 0:(Kt=u,u=o),u!==o&&(c=$r())!==o?i=u=[u,c]:(Kt=i,i=o);58===r.charCodeAt(Kt)?(i=s,Kt++):(i=o,0===Yt&&ur(T)),i!==o?(Lt=t,t=Rt()):(Kt=t,t=o)}else Kt=t,t=o;return t}(),e!==o?(n=function(){var t,e,n,i,u,c;if(t=Kt,xr()===o&&null,(e=pr())!==o){for(n=[],i=Kt,xr(),44===r.charCodeAt(Kt)?(u=f,Kt++):(u=o,0===Yt&&ur(B)),u!==o?(xr(),(c=pr())!==o?i=c:(Kt=i,i=o)):(Kt=i,i=o);i!==o;)n.push(i),i=Kt,xr(),44===r.charCodeAt(Kt)?(u=f,Kt++):(u=o,0===Yt&&ur(B)),u!==o?(xr(),(c=pr())!==o?i=c:(Kt=i,i=o)):(Kt=i,i=o);Lt=t,t=Ft(e,n)}else Kt=t,t=o;return t}(),n!==o?(Lt=t,t=$t(e,n)):(Kt=t,t=o)):(Kt=t,t=o),t}function pr(){var t,e;return t=Kt,e=function(){var t,e,n,i,u,c,a;if(t=Kt,45===r.charCodeAt(Kt)?(e=l,Kt++):(e=o,0===Yt&&ur(D)),e===o&&(e=null),n=function(){var t,e,n,i;if(Yt++,48===r.charCodeAt(Kt)?(t=E,Kt++):(t=o,0===Yt&&ur(dt)),t===o)if(t=Kt,U.test(r.charAt(Kt))?(e=r.charAt(Kt),Kt++):(e=o,0===Yt&&ur(At)),e!==o){for(n=[],F.test(r.charAt(Kt))?(i=r.charAt(Kt),Kt++):(i=o,0===Yt&&ur(Q));i!==o;)n.push(i),F.test(r.charAt(Kt))?(i=r.charAt(Kt),Kt++):(i=o,0===Yt&&ur(Q));t=e=[e,n]}else Kt=t,t=o;return Yt--,t===o&&(e=o,0===Yt&&ur(pt)),t}(),n!==o){if(i=Kt,46===r.charCodeAt(Kt)?(u=h,Kt++):(u=o,0===Yt&&ur(H)),u!==o){if(c=[],F.test(r.charAt(Kt))?(a=r.charAt(Kt),Kt++):(a=o,0===Yt&&ur(Q)),a!==o)for(;a!==o;)c.push(a),F.test(r.charAt(Kt))?(a=r.charAt(Kt),Kt++):(a=o,0===Yt&&ur(Q));else c=o;c!==o?i=u=[u,c]:(Kt=i,i=o)}else Kt=i,i=o;i===o&&(i=null),u=function(){var t,e,n,i,u;if(t=Kt,z.test(r.charAt(Kt))?(e=r.charAt(Kt),Kt++):(e=o,0===Yt&&ur(gt)),e!==o){if(G.test(r.charAt(Kt))?(n=r.charAt(Kt),Kt++):(n=o,0===Yt&&ur(vt)),n===o&&(n=null),i=[],F.test(r.charAt(Kt))?(u=r.charAt(Kt),Kt++):(u=o,0===Yt&&ur(Q)),u!==o)for(;u!==o;)i.push(u),F.test(r.charAt(Kt))?(u=r.charAt(Kt),Kt++):(u=o,0===Yt&&ur(Q));else i=o;i!==o?t=e=[e,n,i]:(Kt=t,t=o)}else Kt=t,t=o;return t}(),u===o&&(u=null),t=e=[e,n,i,u]}else Kt=t,t=o;return t}(),e!==o&&(Lt=t,e=St()),(t=e)===o&&(t=function(){var t,e;return t=Kt,r.substr(Kt,4)===O?(e=O,Kt+=4):(e=o,0===Yt&&ur(mt)),e!==o&&(Lt=t,e=Qt()),(t=e)===o&&(t=Kt,r.substr(Kt,5)===$?(e=$,Kt+=5):(e=o,0===Yt&&ur(Ct)),e!==o&&(Lt=t,e=_t()),t=e),t}(),t===o&&(t=function(){var t,e,n,i;if(t=Kt,39===r.charCodeAt(Kt)?(e=p,Kt++):(e=o,0===Yt&&ur(_)),e!==o){for(n=[],i=mr();i!==o;)n.push(i),i=mr();39===r.charCodeAt(Kt)?(i=p,Kt++):(i=o,0===Yt&&ur(_)),i!==o?(Lt=t,t=It(n)):(Kt=t,t=o)}else Kt=t,t=o;if(t===o)if(t=Kt,34===r.charCodeAt(Kt)?(e=d,Kt++):(e=o,0===Yt&&ur(K)),e!==o){for(n=[],i=Cr();i!==o;)n.push(i),i=Cr();34===r.charCodeAt(Kt)?(i=d,Kt++):(i=o,0===Yt&&ur(K)),i!==o?(Lt=t,t=Ut(n)):(Kt=t,t=o)}else Kt=t,t=o;return t}())===o&&(t=function(){var t,e,n,i,u;if(t=Kt,Fr()!==o){for(e=[],n=Kt,i=Kt,Yt++,44===r.charCodeAt(Kt)?(u=f,Kt++):(u=o,0===Yt&&ur(B)),Yt--,u===o?i=void 0:(Kt=i,i=o),i!==o&&(u=$r())!==o?n=i=[i,u]:(Kt=n,n=o);n!==o;)e.push(n),n=Kt,i=Kt,Yt++,44===r.charCodeAt(Kt)?(u=f,Kt++):(u=o,0===Yt&&ur(B)),Yt--,u===o?i=void 0:(Kt=i,i=o),i!==o&&(u=$r())!==o?n=i=[i,u]:(Kt=n,n=o);Lt=t,t=qt()}else Kt=t,t=o;return t}())),t}function dr(){var t,r,e;if((t=vr())===o)if(t=Kt,Fr()!==o){for(r=[],e=$r();e!==o;)r.push(e),e=$r();Lt=t,t=Nt()}else Kt=t,t=o;return t}function Ar(){var t,e,n;return t=Kt,(e=vr())!==o?(58===r.charCodeAt(Kt)?(n=s,Kt++):(n=o,0===Yt&&ur(T)),n!==o?t=e:(Kt=t,t=o)):(Kt=t,t=o),t}function gr(){var t,e,n,i,u,c,a;if(t=Kt,Fr()!==o){for(e=[],n=Kt,i=[],u=Kt,c=Kt,Yt++,58===r.charCodeAt(Kt)?(a=s,Kt++):(a=o,0===Yt&&ur(T)),Yt--,a===o?c=void 0:(Kt=c,c=o),c!==o&&(a=$r())!==o?u=c=[c,a]:(Kt=u,u=o);u!==o;)i.push(u),u=Kt,c=Kt,Yt++,58===r.charCodeAt(Kt)?(a=s,Kt++):(a=o,0===Yt&&ur(T)),Yt--,a===o?c=void 0:(Kt=c,c=o),c!==o&&(a=$r())!==o?u=c=[c,a]:(Kt=u,u=o);if(58===r.charCodeAt(Kt)?(u=s,Kt++):(u=o,0===Yt&&ur(T)),u!==o?n=i=[i,u]:(Kt=n,n=o),n!==o)for(;n!==o;){for(e.push(n),n=Kt,i=[],u=Kt,c=Kt,Yt++,58===r.charCodeAt(Kt)?(a=s,Kt++):(a=o,0===Yt&&ur(T)),Yt--,a===o?c=void 0:(Kt=c,c=o),c!==o&&(a=$r())!==o?u=c=[c,a]:(Kt=u,u=o);u!==o;)i.push(u),u=Kt,c=Kt,Yt++,58===r.charCodeAt(Kt)?(a=s,Kt++):(a=o,0===Yt&&ur(T)),Yt--,a===o?c=void 0:(Kt=c,c=o),c!==o&&(a=$r())!==o?u=c=[c,a]:(Kt=u,u=o);58===r.charCodeAt(Kt)?(u=s,Kt++):(u=o,0===Yt&&ur(T)),u!==o?n=i=[i,u]:(Kt=n,n=o)}else e=o;e!==o?(Lt=t,t=kt()):(Kt=t,t=o)}else Kt=t,t=o;return t}function vr(){var t,e,n,i;if(t=Kt,39===r.charCodeAt(Kt)?(e=p,Kt++):(e=o,0===Yt&&ur(_)),e!==o){if(n=[],(i=mr())!==o)for(;i!==o;)n.push(i),i=mr();else n=o;n!==o?(39===r.charCodeAt(Kt)?(i=p,Kt++):(i=o,0===Yt&&ur(_)),i!==o?(Lt=t,t=Jt(n)):(Kt=t,t=o)):(Kt=t,t=o)}else Kt=t,t=o;if(t===o)if(t=Kt,34===r.charCodeAt(Kt)?(e=d,Kt++):(e=o,0===Yt&&ur(K)),e!==o){if(n=[],(i=Cr())!==o)for(;i!==o;)n.push(i),i=Cr();else n=o;n!==o?(34===r.charCodeAt(Kt)?(i=d,Kt++):(i=o,0===Yt&&ur(K)),i!==o?(Lt=t,t=Pt(n)):(Kt=t,t=o)):(Kt=t,t=o)}else Kt=t,t=o;return t}function mr(){var t;return(t=br())===o&&(34===r.charCodeAt(Kt)?(t=d,Kt++):(t=o,0===Yt&&ur(K)),t===o&&(t=yr())),t}function Cr(){var t;return(t=br())===o&&(39===r.charCodeAt(Kt)?(t=p,Kt++):(t=o,0===Yt&&ur(_)),t===o&&(t=yr())),t}function br(){var t;return S.test(r.charAt(Kt))?(t=r.charAt(Kt),Kt++):(t=o,0===Yt&&ur(L)),t}function yr(){var t,e,n,i,u;return t=Kt,92===r.charCodeAt(Kt)?(e=A,Kt++):(e=o,0===Yt&&ur(V)),e!==o?(34===r.charCodeAt(Kt)?(n=d,Kt++):(n=o,0===Yt&&ur(K)),n===o&&(39===r.charCodeAt(Kt)?(n=p,Kt++):(n=o,0===Yt&&ur(_)),n===o&&(92===r.charCodeAt(Kt)?(n=A,Kt++):(n=o,0===Yt&&ur(V)),n===o&&(47===r.charCodeAt(Kt)?(n=g,Kt++):(n=o,0===Yt&&ur(W)),n===o&&(n=Kt,98===r.charCodeAt(Kt)?(i=v,Kt++):(i=o,0===Yt&&ur(X)),i!==o&&(Lt=n,i=zt()),(n=i)===o&&(n=Kt,102===r.charCodeAt(Kt)?(i=m,Kt++):(i=o,0===Yt&&ur(Y)),i!==o&&(Lt=n,i=Gt()),(n=i)===o&&(n=Kt,110===r.charCodeAt(Kt)?(i=C,Kt++):(i=o,0===Yt&&ur(Z)),i!==o&&(Lt=n,i=Mt()),(n=i)===o&&(n=Kt,114===r.charCodeAt(Kt)?(i=b,Kt++):(i=o,0===Yt&&ur(tt)),i!==o&&(Lt=n,i=Tt()),(n=i)===o&&(n=Kt,116===r.charCodeAt(Kt)?(i=y,Kt++):(i=o,0===Yt&&ur(rt)),i!==o&&(Lt=n,i=Bt()),(n=i)===o&&(n=Kt,117===r.charCodeAt(Kt)?(i=x,Kt++):(i=o,0===Yt&&ur(et)),i!==o?(u=function(){var t,e,n,i,u;for(t=Kt,e=Kt,n=Kt,i=[],u=Or();u!==o;)i.push(u),u=i.length>=4?o:Or();return i.length<4?(Kt=n,n=o):n=i,(e=n!==o?r.substring(e,Kt):n)!==o&&(Lt=t,e=Dt(e)),t=e}(),u!==o?n=u:(Kt=n,n=o)):(Kt=n,n=o)))))))))),n!==o?t=n:(Kt=t,t=o)):(Kt=t,t=o),t}function xr(){var t,r,e,n,i;for(t=Kt,r=[],e=Kt,n=fr(),(i=wr())!==o?e=n=[n,i]:(Kt=e,e=o);e!==o;)r.push(e),e=Kt,n=fr(),(i=wr())!==o?e=n=[n,i]:(Kt=e,e=o);return(e=Er())!==o?t=r=[r,e]:(Kt=t,t=o),t}function jr(){var t,e,n,i,u;if(t=Kt,e=Kt,35===r.charCodeAt(Kt)?(n=a,Kt++):(n=o,0===Yt&&ur(M)),n!==o){for(i=[],q.test(r.charAt(Kt))?(u=r.charAt(Kt),Kt++):(u=o,0===Yt&&ur(it));u!==o;)i.push(u),q.test(r.charAt(Kt))?(u=r.charAt(Kt),Kt++):(u=o,0===Yt&&ur(it));e=n=[n,i]}else Kt=e,e=o;return e!==o?r.substring(t,Kt):e}function wr(){var t,e,n;return N.test(r.charAt(Kt))?(t=r.charAt(Kt),Kt++):(t=o,0===Yt&&ur(ut)),t===o&&(t=Kt,R.test(r.charAt(Kt))?(e=r.charAt(Kt),Kt++):(e=o,0===Yt&&ur(ct)),e!==o?(N.test(r.charAt(Kt))?(n=r.charAt(Kt),Kt++):(n=o,0===Yt&&ur(ut)),n===o&&(n=null),t=e=[e,n]):(Kt=t,t=o)),t}function Er(){var t,e;if(t=[],k.test(r.charAt(Kt))?(e=r.charAt(Kt),Kt++):(e=o,0===Yt&&ur(at)),e!==o)for(;e!==o;)t.push(e),k.test(r.charAt(Kt))?(e=r.charAt(Kt),Kt++):(e=o,0===Yt&&ur(at));else t=o;return t}function Or(){var t;return J.test(r.charAt(Kt))?(t=r.charAt(Kt),Kt++):(t=o,0===Yt&&ur(st)),t}function $r(){var t;return Yt++,P.test(r.charAt(Kt))?(t=r.charAt(Kt),Kt++):(t=o,0===Yt&&ur(lt)),Yt--,t===o&&0===Yt&&ur(ft),t}function Fr(){var t,e,n;return t=Kt,e=Kt,Yt++,I.test(r.charAt(Kt))?(n=r.charAt(Kt),Kt++):(n=o,0===Yt&&ur(ht)),Yt--,n===o?e=void 0:(Kt=e,e=o),e!==o&&(n=$r())!==o?t=e=[e,n]:(Kt=t,t=o),t}function Sr(){var t;return(t=wr())===o&&(t=function(){var t,e;return t=Kt,Yt++,r.length>Kt?(e=r.charAt(Kt),Kt++):(e=o,0===Yt&&ur(bt)),Yt--,e===o?t=void 0:(Kt=t,t=o),t}()),t}let qr=[],Nr={};if((n=c())!==o&&Kt===r.length)return n;throw n!==o&&Kt<r.length&&ur({type:"end"}),cr(Xt,Wt<r.length?r.charAt(Wt):null,Wt<r.length?ir(Wt,Wt+1):ir(Wt,Wt))}let n,o;function i({lines:t,comments:r},e=" ",i=""){for(n=[],o=Object.entries(r).map((([t,r])=>({pos:parseInt(t),text:r}))),t.forEach((t=>{t.node?function({id:t,labels:r,properties:e},i,s){for(;o.length&&o[0].pos<i.start;)n.push(o.shift().text);for(n.push([a(t),...r.map(u),...e.map(c)].join(s));o.length&&o[0].pos<i.end;)n[n.length-1]+=o.shift().text}(t.node,t.pos,e):t.edge&&function({id:t,from:r,to:e,direction:i,labels:s,properties:f},l,h){for(;o.length&&o[0].pos<l.start;)n.push(o.shift().text);let p="";for(t&&(p+=`${a(t)}: `),p+=`${a(r)} ${i} ${a(e)}`,n.push([p,...s.map(u),...f.map(c)].join(h));o.length&&o[0].pos<l.end;)n[n.length-1]+=o.shift().text}(t.edge,t.pos,e)}));o.length;)n.push(o.shift().text);return n.join(i+"\n")}function u(t){return`:${a(t)}`}function c({key:t,values:r}){return!t.quote&&t.literal.match(/:/)?`${t.literal}: ${s(r)}`:`${a(t)}:${s(r)}`}function a(t){return t.quote?t.quote+t.literal+t.quote:t.literal}function s(t){return t.map(a).join(",")}!function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(t,Error),t.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n,o=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){o=t[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,u=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,c=this.location.source+":"+u.line+":"+u.column;if(o){var a=this.location.end,s=r("",u.line.toString().length," "),f=o[i.line-1],l=(i.line===a.line?a.column:f.length+1)-i.column||1;e+="\n --\x3e "+c+"\n"+s+" |\n"+u.line+" | "+f+"\n"+s+" | "+r("",i.column-1," ")+r("",l,"^")}else e+="\n at "+c}return e},t.buildMessage=function(t,r){var e={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var r=t.parts.map((function(t){return Array.isArray(t)?i(t[0])+"-"+i(t[1]):i(t)}));return"["+(t.inverted?"^":"")+r.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function u(t){return e[t.type](t)}return"Expected "+function(t){var r,e,n=t.map(u);if(n.sort(),n.length>0){for(r=1,e=1;r<n.length;r++)n[r-1]!==n[r]&&(n[e]=n[r],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(r)+" found."};const f=t=>[...t.nodes.map(l),...t.edges.map(h)].join("\n"),l=({id:t,labels:r,properties:e})=>[A(t),...r.map(p),...d(e)].join(" "),h=({from:t,to:r,undirected:e,labels:n,properties:o})=>[`${A(t)} ${e?"--":"->"} ${A(r)}`,...n.map(p),...d(o)].join(" "),p=t=>`:${A(t)}`,d=t=>Object.entries(t).map((([t,r])=>A(t)+":"+r.map(g).join(","))).join(" "),A=t=>JSON.stringify(t),g=t=>"string"==typeof t?JSON.stringify(t):t;function v(t={},r){for(let[e,n]of Object.entries(r))n.length&&(e in t?t[e].push(...n):t[e]=n);return t}function m(t){const r={},e=[];for(let n of t)if(n.node){const t=b(n.node);if(t.id in r){const e=[...r[t.id].labels,...t.labels];r[t.id].labels=Array.from(new Set(e)),v(r[t.id].properties,t.properties)}else r[t.id]=t}else if(n.edge){const t=y(n.edge);for(let e of[t.from,t.to])e in r||(r[e]={id:e,labels:[],properties:{}});e.push(t)}return{nodes:Object.keys(r).sort().map((t=>r[t])),edges:e}}function C(t){let r;return t.node?r={type:"node",...b(t.node)}:t.edge&&(r={type:"edge",...y(t.edge)}),JSON.stringify(r)}function b(t){return{id:j(t.id),labels:[...new Set(t.labels.map(j))],properties:x(t.properties)}}function y(t){let r={from:j(t.from),to:j(t.to),labels:t.labels.map(j),properties:x(t.properties)};return"--"===t.direction&&(r.undirected=!0),t.id?{id:j(t.id),...r}:r}function x(t){let r={};return t.forEach((t=>{const e=j(t.key),n=t.values.map(j);r.hasOwnProperty(e)?r[e]=r[e].concat(n):r[e]=n})),r}function j(t){return t.value??t.literal}"undefined"!=typeof window&&(window.pgFormat=(t,r)=>{const n="string"==typeof t?e(t):t;switch(r){case"space":return i(n," ","");case"lines":return i(n,"\n  ","\n");case"jsonl":return n.lines.map(C).join("\n");case"json":return JSON.stringify(m(n.lines),null,2);case"blitz":return f(m(n.lines))}},window.pgForBlitz=t=>f(m(e(t).lines)))})();