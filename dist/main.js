(()=>{"use strict";function t(e,r,n,o){var u=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(u,t.prototype),u.expected=r,u.found=n,u.location=o,u.name="SyntaxError",u}function e(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,t+(r+=r.repeat(e)).slice(0,e))}function r(e,r){var n,o={},u=(r=void 0!==r?r:{}).grammarSource,i={PG:ue},a=ue,c="#",s="--",f="->",l=":",h=",",p="-",d="0",A=".",v="true",g="false",m="'",C='"',y="\\",b="/",x="b",w="f",j="n",O="r",S="t",E="u",F=/^[^\0- <>"{}|\^`\\]/,$=/^[:#,\-]/,N=/^[1-9]/,k=/^[0-9]/,J=/^[eE]/,P=/^[+\-]/,R=/^[^\0-\b\v\f\x0E-\x1F"'\\]/,z=/^[0-9a-fA-Z]/,I=/^[\n]/,M=/^[\r]/,U=/^[ \t]/,Z=/^[^\r\n]/,q={type:"any"},B=te("UnquotedChar"),G=_t([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),D=_t([":","#",",","-"],!1,!1),H=Yt("#",!1),K=Yt("--",!1),L=Yt("->",!1),Q=Yt(":",!1),T=Yt(",",!1),V=Yt("-",!1),W=Yt("0",!1),X=_t([["1","9"]],!1,!1),Y=_t([["0","9"]],!1,!1),_=Yt(".",!1),tt=_t(["e","E"],!1,!1),et=_t(["+","-"],!1,!1),rt=Yt("true",!1),nt=Yt("false",!1),ot=Yt("'",!1),ut=Yt('"',!1),it=_t([["\0","\b"],"\v","\f",["",""],'"',"'","\\"],!0,!1),at=Yt("\\",!1),ct=Yt("/",!1),st=Yt("b",!1),ft=Yt("f",!1),lt=Yt("n",!1),ht=Yt("r",!1),pt=Yt("t",!1),dt=Yt("u",!1),At=_t([["0","9"],["a","f"],["A","Z"]],!1,!1),vt=_t(["\n"],!1,!1),gt=_t(["\r"],!1,!1),mt=_t([" ","\t"],!1,!1),Ct=_t(["\r","\n"],!0,!1),yt=function(){return{statements:Oe,comments:Se}},bt=function(t,e,r){t.labels=e,t.properties=r,t.pos.end=Xt().end.offset,Oe.push(t)},xt=function(t){t&&(Se[Xt().start.offset]=Wt())},wt=function(){return{value:Wt(),literal:Wt()}},jt=function(t){return{type:"node",id:t,pos:{start:Xt().start.offset}}},Ot=function(r,n,o,u){r||n||function(t,r){throw r=void 0!==r?r:re(Kt,Ht),oe([te("identifier")],e.substring(Kt,Ht),r)}(),n||(r.literal&&(r.literal+=":"),n=r,r=null);const i={type:"edge",from:n,to:u,direction:o};return r&&(i.id=r,(r=r.value||r.literal)in Fe&&function(e,r){throw function(e,r){return new t(e,null,null,r)}(e,r=void 0!==r?r:re(Kt,Ht))}(`Repeated edge identifier: ${r}`),Fe[r]=!0),{...i,pos:{start:Xt().start.offset}}},St=function(t,e){return{key:t,values:e}},Et=function(){const t=Wt().slice(0,-1);return{value:t,literal:t}},Ft=function(){const t=Wt().slice(0,-1);return{value:t,literal:t}},$t=function(t,e){return[t,...e]},Nt=function(){return{value:Number(Wt()),literal:Wt()}},kt=function(){return{value:!0,literal:"true"}},Jt=function(){return{value:!1,literal:"false"}},Pt=function(){return{literal:Wt(),value:Wt()}},Rt=function(t){return Ee(t)},zt=function(t){return Ee(t)},It=function(t){return Ee(t)},Mt=function(t){return Ee(t)},Ut=function(){return"\b"},Zt=function(){return"\f"},qt=function(){return"\n"},Bt=function(){return"\r"},Gt=function(){return"\t"},Dt=function(){return String.fromCharCode(parseInt(Wt(),16))},Ht=0,Kt=0,Lt=[{line:1,column:1}],Qt=0,Tt=[],Vt=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=i[r.startRule]}function Wt(){return e.substring(Kt,Ht)}function Xt(){return re(Kt,Ht)}function Yt(t,e){return{type:"literal",text:t,ignoreCase:e}}function _t(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function te(t){return{type:"other",description:t}}function ee(t){var r,n=Lt[t];if(n)return n;for(r=t-1;!Lt[r];)r--;for(n={line:(n=Lt[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Lt[t]=n,n}function re(t,e,r){var n=ee(t),o=ee(e),i={source:u,start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:o.line,column:o.column}};return r&&u&&"function"==typeof u.offset&&(i.start=u.offset(i.start),i.end=u.offset(i.end)),i}function ne(t){Ht<Qt||(Ht>Qt&&(Qt=Ht,Tt=[]),Tt.push(t))}function oe(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function ue(){var t,e,r,n,u;for(t=Ht,e=[],r=Ht,n=ae(),(u=xe())!==o?r=n=[n,u]:(Ht=r,r=o),r===o&&(r=Ht,(n=ie())!==o?((u=xe())===o&&(u=ce()),u!==o?r=n=[n,u]:(Ht=r,r=o)):(Ht=r,r=o));r!==o;)e.push(r),r=Ht,n=ae(),(u=xe())!==o?r=n=[n,u]:(Ht=r,r=o),r===o&&(r=Ht,(n=ie())!==o?((u=xe())===o&&(u=ce()),u!==o?r=n=[n,u]:(Ht=r,r=o)):(Ht=r,r=o));return r=ae(),Kt=t,yt()}function ie(){var t,r,n,u,i,a,l;if(t=Ht,r=function(){var t,r,n,u,i;return t=Ht,r=function(){var t,r,n,u;return t=Ht,(r=de())!==o&&(n=je())!==o?t=r:(Ht=t,t=o),t===o&&(t=Ht,(r=Ae())!==o?(n=Ht,Vt++,35===e.charCodeAt(Ht)?(u=c,Ht++):(u=o,0===Vt&&ne(H)),Vt--,u===o?n=void 0:(Ht=n,n=o),n!==o&&(u=je())!==o?t=r:(Ht=t,t=o)):(Ht=t,t=o)),t}(),r===o&&(r=null),n=Ht,(u=se())!==o&&je()!==o?n=u:(Ht=n,n=o),n===o&&(n=null),u=function(){var t;return e.substr(Ht,2)===s?(t=s,Ht+=2):(t=o,0===Vt&&ne(K)),t===o&&(e.substr(Ht,2)===f?(t=f,Ht+=2):(t=o,0===Vt&&ne(L))),t}(),u!==o&&je()!==o&&(i=se())!==o?(Kt=t,t=Ot(r,n,u,i)):(Ht=t,t=o),t}(),r===o&&(r=function(){var t,e;return t=Ht,(e=se())!==o&&(Kt=t,e=jt(e)),t=e}()),r!==o){for(n=[],u=Ht,(i=je())!==o&&(a=he())!==o?u=a:(Ht=u,u=o);u!==o;)n.push(u),u=Ht,(i=je())!==o&&(a=he())!==o?u=a:(Ht=u,u=o);for(u=[],i=Ht,(a=je())!==o&&(l=pe())!==o?i=l:(Ht=i,i=o);i!==o;)u.push(i),i=Ht,(a=je())!==o&&(l=pe())!==o?i=l:(Ht=i,i=o);i=ae(),Kt=t,t=bt(r,n,u)}else Ht=t,t=o;return t}function ae(){var t,r;return t=Ht,we(),r=function(){var t,r,n,u,i;if(t=Ht,r=Ht,35===e.charCodeAt(Ht)?(n=c,Ht++):(n=o,0===Vt&&ne(H)),n!==o){for(u=[],Z.test(e.charAt(Ht))?(i=e.charAt(Ht),Ht++):(i=o,0===Vt&&ne(Ct));i!==o;)u.push(i),Z.test(e.charAt(Ht))?(i=e.charAt(Ht),Ht++):(i=o,0===Vt&&ne(Ct));r=n=[n,u]}else Ht=r,r=o;return t=r!==o?e.substring(t,Ht):r}(),r===o&&(r=null),Kt=t,xt(r)}function ce(){var t,r;return t=Ht,Vt++,e.length>Ht?(r=e.charAt(Ht),Ht++):(r=o,0===Vt&&ne(q)),Vt--,r===o?t=void 0:(Ht=t,t=o),t}function se(){var t,e,r;if((t=ge())===o)if(t=Ht,le()!==o){for(e=[],r=fe();r!==o;)e.push(r),r=fe();Kt=t,t=wt()}else Ht=t,t=o;return t}function fe(){var t;return Vt++,F.test(e.charAt(Ht))?(t=e.charAt(Ht),Ht++):(t=o,0===Vt&&ne(G)),Vt--,t===o&&0===Vt&&ne(B),t}function le(){var t,r,n;return t=Ht,r=Ht,Vt++,$.test(e.charAt(Ht))?(n=e.charAt(Ht),Ht++):(n=o,0===Vt&&ne(D)),Vt--,n===o?r=void 0:(Ht=r,r=o),r!==o&&(n=fe())!==o?t=r=[r,n]:(Ht=t,t=o),t}function he(){var t,r,n;return t=Ht,58===e.charCodeAt(Ht)?(r=l,Ht++):(r=o,0===Vt&&ne(Q)),r!==o?(we(),(n=se())!==o?t=n:(Ht=t,t=o)):(Ht=t,t=o),t}function pe(){var t,r,n;return t=Ht,r=function(){var t,r,n,u,i,a;if((t=de())===o&&(t=Ht,(r=Ae())!==o&&(n=je())!==o?t=r:(Ht=t,t=o),t===o))if(t=Ht,(r=le())!==o){for(n=[],u=Ht,i=Ht,Vt++,58===e.charCodeAt(Ht)?(a=l,Ht++):(a=o,0===Vt&&ne(Q)),Vt--,a===o?i=void 0:(Ht=i,i=o),i!==o&&(a=fe())!==o?u=i=[i,a]:(Ht=u,u=o);u!==o;)n.push(u),u=Ht,i=Ht,Vt++,58===e.charCodeAt(Ht)?(a=l,Ht++):(a=o,0===Vt&&ne(Q)),Vt--,a===o?i=void 0:(Ht=i,i=o),i!==o&&(a=fe())!==o?u=i=[i,a]:(Ht=u,u=o);58===e.charCodeAt(Ht)?(u=l,Ht++):(u=o,0===Vt&&ne(Q)),u!==o?(Kt=t,t=Et()):(Ht=t,t=o)}else Ht=t,t=o;return t}(),r!==o?(n=function(){var t,r,n,u,i,a;if(t=Ht,je()===o&&null,(r=ve())!==o){for(n=[],u=Ht,je(),44===e.charCodeAt(Ht)?(i=h,Ht++):(i=o,0===Vt&&ne(T)),i!==o?(je(),(a=ve())!==o?u=a:(Ht=u,u=o)):(Ht=u,u=o);u!==o;)n.push(u),u=Ht,je(),44===e.charCodeAt(Ht)?(i=h,Ht++):(i=o,0===Vt&&ne(T)),i!==o?(je(),(a=ve())!==o?u=a:(Ht=u,u=o)):(Ht=u,u=o);Kt=t,t=$t(r,n)}else Ht=t,t=o;return t}(),n!==o?(Kt=t,t=St(r,n)):(Ht=t,t=o)):(Ht=t,t=o),t}function de(){var t,r,n;return t=Ht,(r=ge())!==o?(58===e.charCodeAt(Ht)?(n=l,Ht++):(n=o,0===Vt&&ne(Q)),n!==o?t=r:(Ht=t,t=o)):(Ht=t,t=o),t}function Ae(){var t,r,n,u,i,a,c;if(t=Ht,le()!==o){for(r=[],n=Ht,u=[],i=Ht,a=Ht,Vt++,58===e.charCodeAt(Ht)?(c=l,Ht++):(c=o,0===Vt&&ne(Q)),Vt--,c===o?a=void 0:(Ht=a,a=o),a!==o&&(c=fe())!==o?i=a=[a,c]:(Ht=i,i=o);i!==o;)u.push(i),i=Ht,a=Ht,Vt++,58===e.charCodeAt(Ht)?(c=l,Ht++):(c=o,0===Vt&&ne(Q)),Vt--,c===o?a=void 0:(Ht=a,a=o),a!==o&&(c=fe())!==o?i=a=[a,c]:(Ht=i,i=o);if(58===e.charCodeAt(Ht)?(i=l,Ht++):(i=o,0===Vt&&ne(Q)),i!==o?n=u=[u,i]:(Ht=n,n=o),n!==o)for(;n!==o;){for(r.push(n),n=Ht,u=[],i=Ht,a=Ht,Vt++,58===e.charCodeAt(Ht)?(c=l,Ht++):(c=o,0===Vt&&ne(Q)),Vt--,c===o?a=void 0:(Ht=a,a=o),a!==o&&(c=fe())!==o?i=a=[a,c]:(Ht=i,i=o);i!==o;)u.push(i),i=Ht,a=Ht,Vt++,58===e.charCodeAt(Ht)?(c=l,Ht++):(c=o,0===Vt&&ne(Q)),Vt--,c===o?a=void 0:(Ht=a,a=o),a!==o&&(c=fe())!==o?i=a=[a,c]:(Ht=i,i=o);58===e.charCodeAt(Ht)?(i=l,Ht++):(i=o,0===Vt&&ne(Q)),i!==o?n=u=[u,i]:(Ht=n,n=o)}else r=o;r!==o?(Kt=t,t=Ft()):(Ht=t,t=o)}else Ht=t,t=o;return t}function ve(){var t;return(t=function(){var t,r,n,u,i,a,c,s,f;if(t=Ht,45===e.charCodeAt(Ht)?(r=p,Ht++):(r=o,0===Vt&&ne(V)),r===o&&(r=null),48===e.charCodeAt(Ht)?(n=d,Ht++):(n=o,0===Vt&&ne(W)),n===o)if(n=Ht,N.test(e.charAt(Ht))?(u=e.charAt(Ht),Ht++):(u=o,0===Vt&&ne(X)),u!==o){for(i=[],k.test(e.charAt(Ht))?(a=e.charAt(Ht),Ht++):(a=o,0===Vt&&ne(Y));a!==o;)i.push(a),k.test(e.charAt(Ht))?(a=e.charAt(Ht),Ht++):(a=o,0===Vt&&ne(Y));n=u=[u,i]}else Ht=n,n=o;if(n!==o){if(u=Ht,46===e.charCodeAt(Ht)?(i=A,Ht++):(i=o,0===Vt&&ne(_)),i!==o){if(a=[],k.test(e.charAt(Ht))?(c=e.charAt(Ht),Ht++):(c=o,0===Vt&&ne(Y)),c!==o)for(;c!==o;)a.push(c),k.test(e.charAt(Ht))?(c=e.charAt(Ht),Ht++):(c=o,0===Vt&&ne(Y));else a=o;a!==o?u=i=[i,a]:(Ht=u,u=o)}else Ht=u,u=o;if(u===o&&(u=null),i=Ht,J.test(e.charAt(Ht))?(a=e.charAt(Ht),Ht++):(a=o,0===Vt&&ne(tt)),a!==o){if(P.test(e.charAt(Ht))?(c=e.charAt(Ht),Ht++):(c=o,0===Vt&&ne(et)),c===o&&(c=null),s=[],k.test(e.charAt(Ht))?(f=e.charAt(Ht),Ht++):(f=o,0===Vt&&ne(Y)),f!==o)for(;f!==o;)s.push(f),k.test(e.charAt(Ht))?(f=e.charAt(Ht),Ht++):(f=o,0===Vt&&ne(Y));else s=o;s!==o?i=a=[a,c,s]:(Ht=i,i=o)}else Ht=i,i=o;i===o&&(i=null),Kt=t,t=Nt()}else Ht=t,t=o;return t}())===o&&(t=function(){var t,r;return t=Ht,e.substr(Ht,4)===v?(r=v,Ht+=4):(r=o,0===Vt&&ne(rt)),r!==o&&(Kt=t,r=kt()),(t=r)===o&&(t=Ht,e.substr(Ht,5)===g?(r=g,Ht+=5):(r=o,0===Vt&&ne(nt)),r!==o&&(Kt=t,r=Jt()),t=r),t}())===o&&(t=function(){var t,r,n,u;if(t=Ht,39===e.charCodeAt(Ht)?(r=m,Ht++):(r=o,0===Vt&&ne(ot)),r!==o){for(n=[],u=me();u!==o;)n.push(u),u=me();39===e.charCodeAt(Ht)?(u=m,Ht++):(u=o,0===Vt&&ne(ot)),u!==o?(Kt=t,t=Rt(n)):(Ht=t,t=o)}else Ht=t,t=o;if(t===o)if(t=Ht,34===e.charCodeAt(Ht)?(r=C,Ht++):(r=o,0===Vt&&ne(ut)),r!==o){for(n=[],u=Ce();u!==o;)n.push(u),u=Ce();34===e.charCodeAt(Ht)?(u=C,Ht++):(u=o,0===Vt&&ne(ut)),u!==o?(Kt=t,t=zt(n)):(Ht=t,t=o)}else Ht=t,t=o;return t}())===o&&(t=function(){var t,r,n,u,i;if(t=Ht,le()!==o){for(r=[],n=Ht,u=Ht,Vt++,44===e.charCodeAt(Ht)?(i=h,Ht++):(i=o,0===Vt&&ne(T)),Vt--,i===o?u=void 0:(Ht=u,u=o),u!==o&&(i=fe())!==o?n=u=[u,i]:(Ht=n,n=o);n!==o;)r.push(n),n=Ht,u=Ht,Vt++,44===e.charCodeAt(Ht)?(i=h,Ht++):(i=o,0===Vt&&ne(T)),Vt--,i===o?u=void 0:(Ht=u,u=o),u!==o&&(i=fe())!==o?n=u=[u,i]:(Ht=n,n=o);Kt=t,t=Pt()}else Ht=t,t=o;return t}()),t}function ge(){var t,r,n,u;if(t=Ht,39===e.charCodeAt(Ht)?(r=m,Ht++):(r=o,0===Vt&&ne(ot)),r!==o){if(n=[],(u=me())!==o)for(;u!==o;)n.push(u),u=me();else n=o;n!==o?(39===e.charCodeAt(Ht)?(u=m,Ht++):(u=o,0===Vt&&ne(ot)),u!==o?(Kt=t,t=It(n)):(Ht=t,t=o)):(Ht=t,t=o)}else Ht=t,t=o;if(t===o)if(t=Ht,34===e.charCodeAt(Ht)?(r=C,Ht++):(r=o,0===Vt&&ne(ut)),r!==o){if(n=[],(u=Ce())!==o)for(;u!==o;)n.push(u),u=Ce();else n=o;n!==o?(34===e.charCodeAt(Ht)?(u=C,Ht++):(u=o,0===Vt&&ne(ut)),u!==o?(Kt=t,t=Mt(n)):(Ht=t,t=o)):(Ht=t,t=o)}else Ht=t,t=o;return t}function me(){var t;return(t=ye())===o&&(34===e.charCodeAt(Ht)?(t=C,Ht++):(t=o,0===Vt&&ne(ut)),t===o&&(t=be())),t}function Ce(){var t;return(t=ye())===o&&(39===e.charCodeAt(Ht)?(t=m,Ht++):(t=o,0===Vt&&ne(ot)),t===o&&(t=be())),t}function ye(){var t;return R.test(e.charAt(Ht))?(t=e.charAt(Ht),Ht++):(t=o,0===Vt&&ne(it)),t}function be(){var t,r,n,u,i;return t=Ht,92===e.charCodeAt(Ht)?(r=y,Ht++):(r=o,0===Vt&&ne(at)),r!==o?(34===e.charCodeAt(Ht)?(n=C,Ht++):(n=o,0===Vt&&ne(ut)),n===o&&(39===e.charCodeAt(Ht)?(n=m,Ht++):(n=o,0===Vt&&ne(ot)),n===o&&(92===e.charCodeAt(Ht)?(n=y,Ht++):(n=o,0===Vt&&ne(at)),n===o&&(47===e.charCodeAt(Ht)?(n=b,Ht++):(n=o,0===Vt&&ne(ct)),n===o&&(n=Ht,98===e.charCodeAt(Ht)?(u=x,Ht++):(u=o,0===Vt&&ne(st)),u!==o&&(Kt=n,u=Ut()),(n=u)===o&&(n=Ht,102===e.charCodeAt(Ht)?(u=w,Ht++):(u=o,0===Vt&&ne(ft)),u!==o&&(Kt=n,u=Zt()),(n=u)===o&&(n=Ht,110===e.charCodeAt(Ht)?(u=j,Ht++):(u=o,0===Vt&&ne(lt)),u!==o&&(Kt=n,u=qt()),(n=u)===o&&(n=Ht,114===e.charCodeAt(Ht)?(u=O,Ht++):(u=o,0===Vt&&ne(ht)),u!==o&&(Kt=n,u=Bt()),(n=u)===o&&(n=Ht,116===e.charCodeAt(Ht)?(u=S,Ht++):(u=o,0===Vt&&ne(pt)),u!==o&&(Kt=n,u=Gt()),(n=u)===o&&(n=Ht,117===e.charCodeAt(Ht)?(u=E,Ht++):(u=o,0===Vt&&ne(dt)),u!==o?(i=function(){var t,r,n,u,i;return t=Ht,z.test(e.charAt(Ht))?(r=e.charAt(Ht),Ht++):(r=o,0===Vt&&ne(At)),r!==o?(z.test(e.charAt(Ht))?(n=e.charAt(Ht),Ht++):(n=o,0===Vt&&ne(At)),n!==o?(z.test(e.charAt(Ht))?(u=e.charAt(Ht),Ht++):(u=o,0===Vt&&ne(At)),u!==o?(z.test(e.charAt(Ht))?(i=e.charAt(Ht),Ht++):(i=o,0===Vt&&ne(At)),i!==o?(Kt=t,t=Dt()):(Ht=t,t=o)):(Ht=t,t=o)):(Ht=t,t=o)):(Ht=t,t=o),t}(),i!==o?n=i:(Ht=n,n=o)):(Ht=n,n=o)))))))))),n!==o?t=n:(Ht=t,t=o)):(Ht=t,t=o),t}function xe(){var t,r,n;return I.test(e.charAt(Ht))?(t=e.charAt(Ht),Ht++):(t=o,0===Vt&&ne(vt)),t===o&&(t=Ht,M.test(e.charAt(Ht))?(r=e.charAt(Ht),Ht++):(r=o,0===Vt&&ne(gt)),r!==o?(I.test(e.charAt(Ht))?(n=e.charAt(Ht),Ht++):(n=o,0===Vt&&ne(vt)),n===o&&(n=null),t=r=[r,n]):(Ht=t,t=o)),t}function we(){var t,r;if(t=[],U.test(e.charAt(Ht))?(r=e.charAt(Ht),Ht++):(r=o,0===Vt&&ne(mt)),r!==o)for(;r!==o;)t.push(r),U.test(e.charAt(Ht))?(r=e.charAt(Ht),Ht++):(r=o,0===Vt&&ne(mt));else t=o;return t}function je(){var t,e,r,n,u;for(t=Ht,e=[],r=Ht,n=ae(),(u=xe())!==o?r=n=[n,u]:(Ht=r,r=o);r!==o;)e.push(r),r=Ht,n=ae(),(u=xe())!==o?r=n=[n,u]:(Ht=r,r=o);return(r=we())!==o?t=e=[e,r]:(Ht=t,t=o),t}const Oe=[],Se={},Ee=t=>({literal:Wt(),value:t.join("")}),Fe={};if((n=a())!==o&&Ht===e.length)return n;throw n!==o&&Ht<e.length&&ne({type:"end"}),oe(Tt,Qt<e.length?e.charAt(Qt):null,Qt<e.length?re(Qt,Qt+1):re(Qt,Qt))}let n,o;function u({statements:t,comments:e},r=" ",u=""){for(n=[],o=Object.entries(e).map((([t,e])=>({pos:parseInt(t),text:e}))),t.forEach((t=>{"node"===t.type?function({id:t,labels:e,properties:r},u,s){for(;o.length&&o[0].pos<u.start;)n.push(o.shift().text);for(n.push([c(t),...e.map(i),...r.map(a)].join(s));o.length&&o[0].pos<u.end;)n[n.length-1]+=o.shift().text}(t,t.pos,r):"edge"===t.type&&function({id:t,from:e,to:r,direction:u,labels:s,properties:f},l,h){for(;o.length&&o[0].pos<l.start;)n.push(o.shift().text);let p="";for(t&&(p+=`${c(t)}: `),p+=`${c(e)} ${u} ${c(r)}`,n.push([p,...s.map(i),...f.map(a)].join(h));o.length&&o[0].pos<l.end;)n[n.length-1]+=o.shift().text}(t,t.pos,r)}));o.length;)n.push(o.shift().text);return n.join(u+"\n")}function i(t){return`:${c(t)}`}function a({key:t,values:e}){return t.literal===t.value&&t.value.match(/:/)?`${t.literal}: ${s(e)}`:`${c(t)}:${s(e)}`}function c(t){return"number"==typeof t.value?t.value:t.literal??t.value}function s(t){return t.map(c).join(",")}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var n,o=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){o=t[n].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(u):u,a=this.location.source+":"+i.line+":"+i.column;if(o){var c=this.location.end,s=e("",i.line.toString().length," "),f=o[u.line-1],l=(u.line===c.line?c.column:f.length+1)-u.column||1;r+="\n --\x3e "+a+"\n"+s+" |\n"+i.line+" | "+f+"\n"+s+" | "+e("",u.column-1," ")+e("",l,"^")}else r+="\n at "+a}return r},t.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?u(t[0])+"-"+u(t[1]):u(t)}));return"["+(t.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function u(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return r[t.type](t)}return"Expected "+function(t){var e,r,n=t.map(i);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."};const f=t=>[...t.filter((t=>"node"===t.type)).map(l),...t.filter((t=>"edge"===t.type)).map(l)].join("\n"),l=({id:t,labels:e,properties:r})=>[d(t),...e.map(h),...p(r)].join(" "),h=t=>`:${d(t)}`,p=t=>Object.entries(t).map((([t,e])=>d(t)+":"+e.map(A).join(","))),d=t=>JSON.stringify(t),A=t=>"string"==typeof t?JSON.stringify(t):t;function v(t={},e){for(let[r,n]of Object.entries(e))n.length&&(r in t?t[r].push(...n):t[r]=n);return t}function g({statements:t}){const e={},r=[];for(let n of t)if("node"===n.type){const t=C(n);if(t.id in e){const r=[...e[t.id].labels,...t.labels];e[t.id].labels=Array.from(new Set(r)),v(e[t.id].properties,t.properties)}else e[t.id]=t}else if("edge"===n.type){const t=y(n);for(let r of[t.from,t.to])r in e||(e[r]={id:r,labels:[],properties:{}});r.push(t)}return{nodes:Object.keys(e).sort().map((t=>e[t])),edges:r}}function m(t){let e;return"node"===t.type?e={type:"node",...C(t)}:"edge"===t.type&&(e={type:"edge",...y(t)}),JSON.stringify(e)}function C(t){return{id:x(t.id),labels:[...new Set(t.labels.map(x))],properties:b(t.properties)}}function y(t){let e={from:x(t.from),to:x(t.to),labels:t.labels.map(x),properties:b(t.properties)};return"--"===t.direction&&(e.undirected=!0),t.id?{id:x(t.id),...e}:e}function b(t){let e={};return t.forEach((t=>{const r=x(t.key),n=t.values.map(x);e.hasOwnProperty(r)?e[r]=e[r].concat(n):e[r]=n})),e}function x(t){return t.value??t.literal}"undefined"!=typeof window&&(window.pgFormat=(t,e)=>{const n="string"==typeof t?r(t):t;switch(e){case"space":return u(n," ","");case"lines":return u(n,"\n  ","\n");case"jsonl":return n.statements.map(m).join("\n");case"json":return JSON.stringify(g(n),null,2);case"blitz":return f(g(n));case"parsed":return JSON.stringify(n,null,2)}},window.pgForBlitz=t=>f(g(r(t))),window.pgParse=r)})();